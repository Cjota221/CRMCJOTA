<!-- ==========================================
     DASHBOARD FINANCEIRO - CRM v3.0
     ========================================== -->

<!-- Cards de An√°lise Financeira -->
<div class="financial-metrics">
    <div class="metric-row">
        <div class="metric-card total-vendas">
            <div class="metric-icon">üí∞</div>
            <div class="metric-content">
                <h3>Total em Vendas</h3>
                <p class="metric-value" id="totalVendas">R$ 0,00</p>
                <span class="metric-label">Soma de todos os clientes</span>
            </div>
        </div>

        <div class="metric-card ticket-medio">
            <div class="metric-icon">üìä</div>
            <div class="metric-content">
                <h3>Ticket M√©dio</h3>
                <p class="metric-value" id="ticketMedio">R$ 0,00</p>
                <span class="metric-label">Valor m√©dio por cliente</span>
            </div>
        </div>

        <div class="metric-card maior-compra">
            <div class="metric-icon">üèÜ</div>
            <div class="metric-content">
                <h3>Maior Compra</h3>
                <p class="metric-value" id="maiorCompra">R$ 0,00</p>
                <span class="metric-label" id="clienteMaiorCompra">-</span>
            </div>
        </div>

        <div class="metric-card menor-compra">
            <div class="metric-icon">üìâ</div>
            <div class="metric-content">
                <h3>Menor Compra</h3>
                <p class="metric-value" id="menorCompra">R$ 0,00</p>
                <span class="metric-label" id="clienteMenorCompra">-</span>
            </div>
        </div>
    </div>

    <div class="metric-row">
        <div class="metric-card clientes-vip">
            <div class="metric-icon">‚≠ê</div>
            <div class="metric-content">
                <h3>Clientes VIP</h3>
                <p class="metric-value" id="clientesVIP">0</p>
                <span class="metric-label">Acima de R$ 5.000</span>
            </div>
        </div>

        <div class="metric-card clientes-premium">
            <div class="metric-icon">üíé</div>
            <div class="metric-content">
                <h3>Clientes Premium</h3>
                <p class="metric-value" id="clientesPremium">0</p>
                <span class="metric-label">Acima de R$ 10.000</span>
            </div>
        </div>

        <div class="metric-card clientes-elite">
            <div class="metric-icon">üëë</div>
            <div class="metric-content">
                <h3>Clientes Elite</h3>
                <p class="metric-value" id="clientesElite">0</p>
                <span class="metric-label">Acima de R$ 50.000</span>
            </div>
        </div>

        <div class="metric-card inativos-alto-valor">
            <div class="metric-icon">üéØ</div>
            <div class="metric-content">
                <h3>Oportunidades</h3>
                <p class="metric-value" id="inativosAltoValor">0</p>
                <span class="metric-label">Inativos de alto valor</span>
            </div>
        </div>
    </div>
</div>

<!-- Gr√°fico de Distribui√ß√£o -->
<div class="chart-container">
    <h3>üìä Distribui√ß√£o por Faixa de Valor</h3>
    <div class="distribution-chart" id="distributionChart"></div>
</div>

<!-- Ranking Top Clientes -->
<div class="ranking-container">
    <div class="ranking-header">
        <h3>üèÜ Top 10 Clientes</h3>
        <div class="ranking-actions">
            <button class="btn-small" onclick="exportarRanking(10)">
                <i class="icon-download"></i> Exportar Top 10
            </button>
            <button class="btn-small" onclick="exportarRanking(50)">
                <i class="icon-download"></i> Exportar Top 50
            </button>
        </div>
    </div>
    <div class="ranking-list" id="rankingList"></div>
</div>

<!-- A√ß√µes R√°pidas -->
<div class="quick-actions">
    <h3>‚ö° A√ß√µes R√°pidas</h3>
    <div class="action-buttons">
        <button class="action-btn vip" onclick="acaoRapidaVIPs()">
            <span class="action-icon">‚≠ê</span>
            <span class="action-text">
                <strong>Campanha VIP</strong>
                <small>WhatsApp para clientes VIP</small>
            </span>
        </button>

        <button class="action-btn reativar" onclick="acaoRapidaReativar()">
            <span class="action-icon">üéØ</span>
            <span class="action-text">
                <strong>Reativar Alto Valor</strong>
                <small>Inativos com hist√≥rico alto</small>
            </span>
        </button>

        <button class="action-btn crescimento" onclick="acaoRapidaCrescimento()">
            <span class="action-icon">üìà</span>
            <span class="action-text">
                <strong>Crescimento</strong>
                <small>Clientes de baixo ticket</small>
            </span>
        </button>

        <button class="action-btn aniversariantes" onclick="acaoRapidaAniversariantes()">
            <span class="action-icon">üéÇ</span>
            <span class="action-text">
                <strong>Aniversariantes VIP</strong>
                <small>Alto valor + anivers√°rio</small>
            </span>
        </button>
    </div>
</div>

<!-- Filtros Avan√ßados de Valor -->
<div class="advanced-filters">
    <h3>üîç Filtros de Valor</h3>
    <div class="filter-row">
        <div class="filter-group">
            <label>Ordenar por Valor:</label>
            <select id="ordenarValor" onchange="aplicarFiltroValor()">
                <option value="">Sem ordena√ß√£o</option>
                <option value="desc">Maior ‚Üí Menor</option>
                <option value="asc">Menor ‚Üí Maior</option>
            </select>
        </div>

        <div class="filter-group">
            <label>Categoria:</label>
            <select id="filtroCategoria" onchange="aplicarFiltroValor()">
                <option value="">Todas</option>
                <option value="elite">üëë Elite (R$ 50k+)</option>
                <option value="premium">üíé Premium (R$ 10k+)</option>
                <option value="vip">‚≠ê VIP (R$ 5k+)</option>
                <option value="regular">üë§ Regular</option>
                <option value="novo">üÜï Novo (sem compras)</option>
            </select>
        </div>

        <div class="filter-group">
            <label>Valor M√≠nimo (R$):</label>
            <input type="number" id="valorMinimo" placeholder="0" onchange="aplicarFiltroValor()">
        </div>

        <div class="filter-group">
            <label>Valor M√°ximo (R$):</label>
            <input type="number" id="valorMaximo" placeholder="‚àû" onchange="aplicarFiltroValor()">
        </div>

        <div class="filter-group">
            <label>Top Clientes:</label>
            <select id="topClientes" onchange="aplicarFiltroValor()">
                <option value="">Todos</option>
                <option value="10">Top 10</option>
                <option value="50">Top 50</option>
                <option value="100">Top 100</option>
            </select>
        </div>
    </div>

    <div class="filter-actions">
        <button class="btn-primary" onclick="aplicarFiltroValor()">
            <i class="icon-filter"></i> Aplicar Filtros
        </button>
        <button class="btn-secondary" onclick="limparFiltrosValor()">
            <i class="icon-clear"></i> Limpar
        </button>
    </div>
</div>

<style>
/* ==========================================
   ESTILOS DASHBOARD FINANCEIRO
   ========================================== */

.financial-metrics {
    margin: 2rem 0;
}

.metric-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-bottom: 1.5rem;
}

.metric-card {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: all 0.3s ease;
}

.metric-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 4px 16px rgba(0,0,0,0.15);
}

.metric-icon {
    font-size: 3rem;
    line-height: 1;
}

.metric-content {
    flex: 1;
}

.metric-content h3 {
    font-size: 0.875rem;
    color: #6B7280;
    margin: 0 0 0.5rem 0;
    text-transform: uppercase;
    font-weight: 600;
}

.metric-value {
    font-size: 1.875rem;
    font-weight: 700;
    color: #1F2937;
    margin: 0;
}

.metric-label {
    font-size: 0.75rem;
    color: #9CA3AF;
}

/* Cards espec√≠ficos */
.total-vendas { border-left: 4px solid #10B981; }
.ticket-medio { border-left: 4px solid #3B82F6; }
.maior-compra { border-left: 4px solid #F59E0B; }
.menor-compra { border-left: 4px solid #6B7280; }
.clientes-vip { border-left: 4px solid #F59E0B; }
.clientes-premium { border-left: 4px solid #6B46C1; }
.clientes-elite { border-left: 4px solid #8B0000; }
.inativos-alto-valor { border-left: 4px solid #EF4444; }

/* Gr√°fico de distribui√ß√£o */
.chart-container {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    margin: 2rem 0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.chart-container h3 {
    margin: 0 0 1.5rem 0;
    color: #1F2937;
}

.distribution-chart {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.chart-bar {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.chart-label {
    width: 150px;
    font-size: 0.875rem;
    color: #6B7280;
}

.chart-bar-bg {
    flex: 1;
    height: 32px;
    background: #F3F4F6;
    border-radius: 6px;
    overflow: hidden;
    position: relative;
}

.chart-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #3B82F6, #60A5FA);
    border-radius: 6px;
    transition: width 0.6s ease;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding: 0 0.5rem;
}

.chart-value {
    font-size: 0.75rem;
    font-weight: 600;
    color: white;
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

/* Ranking */
.ranking-container {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    margin: 2rem 0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.ranking-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.ranking-header h3 {
    margin: 0;
    color: #1F2937;
}

.ranking-actions {
    display: flex;
    gap: 0.5rem;
}

.ranking-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.ranking-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: #F9FAFB;
    border-radius: 8px;
    transition: all 0.2s ease;
}

.ranking-item:hover {
    background: #F3F4F6;
    transform: translateX(4px);
}

.ranking-position {
    font-size: 1.5rem;
    font-weight: 700;
    color: #9CA3AF;
    min-width: 40px;
    text-align: center;
}

.ranking-position.top1 { color: #F59E0B; }
.ranking-position.top2 { color: #9CA3AF; }
.ranking-position.top3 { color: #CD7F32; }

.ranking-info {
    flex: 1;
}

.ranking-name {
    font-weight: 600;
    color: #1F2937;
    margin-bottom: 0.25rem;
}

.ranking-contact {
    font-size: 0.875rem;
    color: #6B7280;
}

.ranking-value {
    font-size: 1.25rem;
    font-weight: 700;
    color: #10B981;
}

.ranking-badge {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    margin-left: 0.5rem;
}

.badge-elite { background: #8B0000; color: white; }
.badge-premium { background: #6B46C1; color: white; }
.badge-vip { background: #F59E0B; color: white; }

/* A√ß√µes R√°pidas */
.quick-actions {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    margin: 2rem 0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.quick-actions h3 {
    margin: 0 0 1.5rem 0;
    color: #1F2937;
}

.action-buttons {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1rem;
}

.action-btn {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.25rem;
    border: 2px solid #E5E7EB;
    border-radius: 12px;
    background: white;
    cursor: pointer;
    transition: all 0.2s ease;
}

.action-btn:hover {
    border-color: #3B82F6;
    background: #F0F9FF;
    transform: translateY(-2px);
}

.action-icon {
    font-size: 2.5rem;
    line-height: 1;
}

.action-text {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    text-align: left;
}

.action-text strong {
    color: #1F2937;
    font-size: 1rem;
}

.action-text small {
    color: #6B7280;
    font-size: 0.875rem;
}

/* Filtros Avan√ßados */
.advanced-filters {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    margin: 2rem 0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.advanced-filters h3 {
    margin: 0 0 1.5rem 0;
    color: #1F2937;
}

.filter-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.filter-group label {
    font-size: 0.875rem;
    font-weight: 600;
    color: #374151;
}

.filter-group select,
.filter-group input {
    padding: 0.625rem;
    border: 1px solid #D1D5DB;
    border-radius: 8px;
    font-size: 0.875rem;
    transition: all 0.2s ease;
}

.filter-group select:focus,
.filter-group input:focus {
    outline: none;
    border-color: #3B82F6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.filter-actions {
    display: flex;
    gap: 1rem;
}

.btn-small {
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
}

/* Responsive */
@media (max-width: 768px) {
    .metric-row {
        grid-template-columns: 1fr;
    }

    .action-buttons {
        grid-template-columns: 1fr;
    }

    .filter-row {
        grid-template-columns: 1fr;
    }

    .ranking-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }

    .ranking-actions {
        width: 100%;
    }

    .ranking-actions button {
        flex: 1;
    }
}
</style>
